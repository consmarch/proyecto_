<div class="cart-container mt-4">

  <h2 class="cart-title mb-3">Carrito de compras</h2>

  <div *ngIf="carrito.length > 0; else vacio">

    <div class="cart-list">
      <div class="cart-item" *ngFor="let item of carrito">

        <!-- Imagen -->
        <div class="item-img">
          <img *ngIf="item.imagen"
               [src]="'http://localhost/api_proyecto/public/uploads/' + item.imagen"
               alt="Producto">
        </div>

        <!-- Info del producto -->
        <div class="item-info">
          <h4 class="item-name">{{ item.nombre }}</h4>
          <p class="item-price">Precio: $ {{ item.precio_unitario }}</p>

          <div class="item-qty">
            <label>Cantidad:</label>
            <input type="number"
                   min="1"
                   [value]="item.cantidad"
                   (change)="cambiarCantidad(item.id_detalle_carrito, $event)">
          </div>

          <p class="item-subtotal">Subtotal: $ {{ item.subtotal }}</p>
        </div>

        <!-- Botón eliminar -->
        <div class="item-action">
          <button class="btn-remove"
                  (click)="eliminar(item.id_detalle_carrito)">
            ✕
          </button>
        </div>

      </div>
    </div>

    <!-- Totales -->
    <div class="cart-summary text-end mt-4">
      <p>Subtotal: <strong>$ {{ total }}</strong></p>
      <p>Envío: <strong>$ {{ envio }}</strong></p>
      <p class="cart-total">Total: <strong>$ {{ total + envio }}</strong></p>

      <button class="btn-clear" (click)="vaciarCarrito()">
        Vaciar carrito
      </button>

      <button class="btn-buy" (click)="irACompra()">
        Finalizar compra
      </button>
    </div>

  </div>

  <ng-template #vacio>
    <div class="cart-empty text-center">
      Tu carrito está vacío.
    </div>
  </ng-template>

</div>
