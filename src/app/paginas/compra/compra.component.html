<div class="checkout-wrapper">

  <h2 class="title">Finalizar Compra</h2>

  <!-- Mensaje -->
  <div *ngIf="mensaje" class="info-bubble">
    {{ mensaje }}
  </div>

  <!-- Productos -->
  <div class="glass-card" *ngIf="productos.length > 0">
    <h3 class="section-title">Productos</h3>

    <div class="product-card" *ngFor="let p of productos">

      <img *ngIf="p.imagen"
           class="prod-img"
           [src]="'http://localhost/api_proyecto/public/uploads/' + p.imagen">

      <div class="prod-data">
        <h4>{{ p.nombre }}</h4>
        <small class="desc">{{ p.descripcion }}</small>

        <div class="prod-meta">
          <span>Cant: <strong>{{ p.cantidad }}</strong></span>
          <span>Precio: ${{ p.precio_unitario }}</span>
          <span class="sub">Subtotal: ${{ p.subtotal }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Resumen -->
  <div class="glass-card" *ngIf="productos.length > 0">
    <h3 class="section-title">Resumen</h3>
    <div class="summary-line">Subtotal <span>${{ subtotal }}</span></div>
    <div class="summary-line">Envío <span>${{ envio }}</span></div>
    <div class="divider"></div>
    <div class="summary-total">Total <span>${{ total }}</span></div>
  </div>

  <!-- Datos -->
  <div class="glass-card" *ngIf="productos.length > 0">
    <h3 class="section-title">Datos de Envío</h3>

    <input class="input" placeholder="Dirección" [(ngModel)]="datos.direccion">
    <input class="input" placeholder="Teléfono" [(ngModel)]="datos.telefono">

    <button class="btn-main"
      (click)="finalizarCompra()"
      [disabled]="cargando">
      {{ cargando ? "Procesando..." : "Confirmar compra" }}
    </button>
  </div>

  <!-- Vacío -->
  <div *ngIf="productos.length === 0" class="empty-msg">
    Tu carrito está vacío.
  </div>

</div>
